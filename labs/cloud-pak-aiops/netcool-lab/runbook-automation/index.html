<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-cloud-pak-aiops/netcool-lab/runbook-automation/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">5. Runbook Automation | IBM AIOps</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://jorgego11.github.io/techxchange2024/labs/cloud-pak-aiops/netcool-lab/runbook-automation/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="5. Runbook Automation | IBM AIOps"><meta data-rh="true" name="description" content="Describes a runbook automation example"><meta data-rh="true" property="og:description" content="Describes a runbook automation example"><link data-rh="true" rel="icon" href="/techxchange2024/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://jorgego11.github.io/techxchange2024/labs/cloud-pak-aiops/netcool-lab/runbook-automation/"><link data-rh="true" rel="alternate" href="https://jorgego11.github.io/techxchange2024/labs/cloud-pak-aiops/netcool-lab/runbook-automation/" hreflang="en"><link data-rh="true" rel="alternate" href="https://jorgego11.github.io/techxchange2024/labs/cloud-pak-aiops/netcool-lab/runbook-automation/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/techxchange2024/blog/rss.xml" title="IBM AIOps RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/techxchange2024/blog/atom.xml" title="IBM AIOps Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7WTTHT6SEH"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-7WTTHT6SEH",{anonymize_ip:!0})</script><link rel="stylesheet" href="/techxchange2024/assets/css/styles.118d6007.css">
<link rel="preload" href="/techxchange2024/assets/js/runtime~main.7080ada5.js" as="script">
<link rel="preload" href="/techxchange2024/assets/js/main.c0225fc7.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/techxchange2024/"><div class="navbar__logo"><img src="/techxchange2024/img/ibm-watson-logo.png" alt="Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/techxchange2024/img/ibm-watson-logo.png" alt="Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">IBM SWAT</b></a><a class="navbar__item navbar__link" href="/techxchange2024/labs/jam-in-a-box/">Labs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/jorgego11/waiops-tech-jam" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/techxchange2024/labs/jam-in-a-box/">Jam-in-a-Box</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/techxchange2024/labs/cloud-pak-aiops/netcool-lab/introduction/">Cloud Pak for AIOps Labs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/techxchange2024/labs/cloud-pak-aiops/netcool-lab/introduction/">Netcool + Cloud Pak for AIOps</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/techxchange2024/labs/cloud-pak-aiops/netcool-lab/introduction/">1. Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/techxchange2024/labs/cloud-pak-aiops/netcool-lab/lab-environment/">2. Lab Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/techxchange2024/labs/cloud-pak-aiops/netcool-lab/netcool-connector/">3. Set up the Netcool Connector</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/techxchange2024/labs/cloud-pak-aiops/netcool-lab/migrate-custom-correlation/">4. Migrate a Netcool Custom Correlation to AIOps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/techxchange2024/labs/cloud-pak-aiops/netcool-lab/runbook-automation/">5. Runbook Automation</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/techxchange2024/labs/cloud-pak-aiops/topology-lab/introduction/">Topology</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/techxchange2024/labs/cloud-pak-aiops/alert-lab/introduction/">Alert Correlation</a></div></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/techxchange2024/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Cloud Pak for AIOps Labs</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Netcool + Cloud Pak for AIOps</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">5. Runbook Automation</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>5. Runbook Automation</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="51-overview">5.1: Overview<a href="#51-overview" class="hash-link" aria-label="Direct link to 5.1: Overview" title="Direct link to 5.1: Overview">​</a></h2><p>In this final section, we will review the Automation capabilities of the Cloud Pak for AIOps. You can use Runbook Automation to build and
execute runbooks that can help IT staff to solve common operational problems. Runbook Automation can automate procedures that do not
require human interaction, thereby increasing the efficiency of IT operations processes. Operators can spend more time innovating and
are freed from performing time-consuming manual tasks. </p><p>We will create a RunBook Automation that when a particular alert arrives, it will connect to a remote server and delete the content of a ./tmp folder.
In order to accomplish this we will execute the following tasks: </p><ul><li>Create a ssh integration</li><li>Create an Action to connect to a remote server and delete the files in a folder</li><li>Create a RunBook that will call the previous Action</li><li>Create an AIOps Policy that will execute the previous runbook when a particular alert is received or updated</li><li>Confirm that the Runbook has run</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="52-create-an-ssh-integration">5.2: Create an SSH Integration<a href="#52-create-an-ssh-integration" class="hash-link" aria-label="Direct link to 5.2: Create an SSH Integration" title="Direct link to 5.2: Create an SSH Integration">​</a></h2><p>From the Home page select <strong>Integrations</strong>. Click on <strong>Add integration</strong>.
On the Search bar type <em>ssh</em>. Click on the <strong>SSH</strong> tile and click on <strong>Get started</strong>.</p><p>We will add this public key to our server to enable the ssh authentication.
From the <strong>Terminal</strong> window, run the following commands</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir ~/.ssh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gedit ~/.ssh/authorized_keys</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>On the SSH Integration page, click on the Copy button to copy the public key and paste it into the editor. </p><p><img loading="lazy" src="/techxchange2024/assets/images/ssh-copy-7994d9fa93215c2aff2e48ed5c58ce41.png" width="3338" height="1574" class="img_ev3q"></p><p>On the editor click on <strong>Save</strong> and close the editor.</p><p>On the SSH integration, click on <strong>Next</strong> (leave <em>Enable jumpserver</em> Off) and click <strong>Done</strong>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="53-create-an-action-automation">5.3: Create an Action Automation<a href="#53-create-an-action-automation" class="hash-link" aria-label="Direct link to 5.3: Create an Action Automation" title="Direct link to 5.3: Create an Action Automation">​</a></h2><p>In runbooks, actions are the collection of several manual steps into a single automated entity.
An action improves runbook efficiency by automatically performing procedures and operations.
Actions supports the following technologies to connect to a backend system: Script, HTTP and Ansible. </p><p>From the Home page select <strong>Automations</strong>. Click on the <strong>Actions</strong> tab. Click on <strong>Create action</strong>.</p><ul><li>Under <strong>Type</strong> select <strong>SSH</strong>.</li><li>Under <strong>Name</strong> type <code>clean folder automation action</code></li><li>Scroll down and under <strong>Action script</strong><ul><li>Under <strong>Shell</strong> select <strong>Bash</strong></li><li>Under Script paste the following bash script<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rm ~/lab/tmp/*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li>On the right, click on the 3 dots after <strong>target</strong> and select <strong>Edit</strong></li></ul><p><img loading="lazy" src="/techxchange2024/assets/images/target-edit-bd381c0c75dce61de97c19a447bd51fa.png" width="3338" height="1574" class="img_ev3q"></p><ul><li><ul><li>On the Edit parameter pop-up<ul><li>check <strong>Set a default value</strong></li><li>Under <strong>Default value</strong> type <code>10.100.1.200</code></li></ul></li></ul></li><li><p>On the right, click on the 3 dots after <strong>user</strong> and select <strong>Edit</strong></p><ul><li>On the Edit parameter pop-up<ul><li>check <strong>Set a default value</strong></li><li>Under <strong>Default value</strong> type <code>ibmuser</code></li></ul></li></ul></li><li><p>Click on <strong>Publish</strong></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="54-create-an-runbook-automation">5.4: Create an RunBook Automation<a href="#54-create-an-runbook-automation" class="hash-link" aria-label="Direct link to 5.4: Create an RunBook Automation" title="Direct link to 5.4: Create an RunBook Automation">​</a></h2><p>Runbooks can be manual, semi-automated or fully automated. Runbooks are used to orchestrate the execution of Actions.</p><ul><li>Click on the <strong>Runbooks</strong> tab and select <strong>Create runbook</strong></li><li>Under <strong>Name</strong> type <code>clean folder automation runbook</code></li><li>Click <strong>Add action step</strong></li><li>Select <strong>clean folder automation action</strong> and click <strong>Select this action</strong></li><li>On the Action parameter mapping pop-up, <ul><li>select <strong>Use default value</strong> for <strong>target</strong> and <strong>user</strong></li><li>Click on <strong>Save</strong></li></ul></li></ul><p><img loading="lazy" src="/techxchange2024/assets/images/runbook-abc3d633666553023d8d2e186b0bbaa7.png" width="3338" height="1574" class="img_ev3q"></p><ul><li>Finally, click on <strong>Publish</strong></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="55-create-an-aiops-runbook-policy-automation">5.5: Create an AIOps RunBook Policy Automation<a href="#55-create-an-aiops-runbook-policy-automation" class="hash-link" aria-label="Direct link to 5.5: Create an AIOps RunBook Policy Automation" title="Direct link to 5.5: Create an AIOps RunBook Policy Automation">​</a></h2><p>Lets create the tmp folder that will be cleaned by the runbook. On the <strong>Terminal</strong> window, run the commands listed below
to create the tmp folder and two dummy text files for testing</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/lab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir tmp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;file content&quot; &gt; ./tmp/file1.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;file content&quot; &gt; ./tmp/file2.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you run the command below, you will see that two files are created under ~/lab/tmp</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ls -l ~/lab/tmp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally, we will create an AIOps runbook Policy Automation that will call the runbook
when a particular event arrives or its updated.</p><ul><li><p>Click on the <strong>Policies</strong> tab and select <strong>Create policy</strong></p></li><li><p>Click on the <strong>Assign a runbook to alerts</strong> tile</p></li><li><p>Under <strong>Policy name</strong> type <code>alert policy</code></p></li><li><p>Under <strong>Execution order</strong>, leave the default value of 50</p></li><li><p>Under <strong>Policy triggers</strong>, leave the defaults to activate the policy after an alert is created or updated</p><ul><li><p>Click <strong>Add update type</strong> and under <strong>Alert property</strong> select <strong>lastOccurrenceTime</strong> as shown below</p><p><img loading="lazy" src="/techxchange2024/assets/images/last-occurrence-47fe02d02b4b4c16540e25d0f3ea1726.png" width="2616" height="830" class="img_ev3q"></p></li></ul></li><li><p>Under <strong>Conditions sets</strong>, click on <strong>Add condition</strong> and select Alert property to create a new trigger condition based on the properties of the alert</p><ul><li><p>Leave the <strong>AND</strong> operator selected</p></li><li><p>Under Alert properties</p><ul><li>Under <strong>Property</strong> type <code>resource</code> and select <strong>name</strong> in the menu options. </li><li>Under <strong>Operator</strong> select <strong>equal to</strong></li><li>Under <strong>Matches</strong> select <strong>only</strong></li><li>Inder <strong>Value</strong> type <code>sydney-server08.ibm.com</code> and select <strong>String:sydney-server08.ibm.com</strong></li><li>Your Condition should look like this</li></ul><p><img loading="lazy" src="/techxchange2024/assets/images/condition-134476d9a446cc5aa5adcde50928bf20.png" width="2762" height="682" class="img_ev3q"></p></li></ul></li><li><p>Under Assign Runbook(s), check the <strong>clean folder automation runbook </strong></p></li><li><p>Check <strong>Automatically run this runbook</strong>, as shown below</p></li></ul><p><img loading="lazy" src="/techxchange2024/assets/images/runbook-selection-52befa02da42f2c8ff6aea4db2859933.png" width="2700" height="998" class="img_ev3q"></p><ul><li>Finally, scroll up and select the <strong>Create policy</strong> button in the top right</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="56-confirm-that-the-runbook-actually-run">5.6: Confirm that the Runbook actually run<a href="#56-confirm-that-the-runbook-actually-run" class="hash-link" aria-label="Direct link to 5.6: Confirm that the Runbook actually run" title="Direct link to 5.6: Confirm that the Runbook actually run">​</a></h2><p>After you saved the policy, after a couple of minutes, the next time that an alert has a resource name as sydney-server08.ibm.com the runbook will run
and the <strong>Status</strong> column will show a green check and the <strong>Last run</strong> date and time will be populated as shown below</p><p><img loading="lazy" src="/techxchange2024/assets/images/runbook-run-db6d32ba4a374a380986861f4bef9c5a.png" width="3358" height="948" class="img_ev3q"></p><p>As the final check, run the command below again. You will see that the folder ~/lab/tmp is now empty</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ls -l ~/lab/tmp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/techxchange2024/labs/cloud-pak-aiops/netcool-lab/migrate-custom-correlation/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">4. Migrate a Netcool Custom Correlation to AIOps</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/techxchange2024/labs/cloud-pak-aiops/topology-lab/introduction/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">1. Introduction</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#51-overview" class="table-of-contents__link toc-highlight">5.1: Overview</a></li><li><a href="#52-create-an-ssh-integration" class="table-of-contents__link toc-highlight">5.2: Create an SSH Integration</a></li><li><a href="#53-create-an-action-automation" class="table-of-contents__link toc-highlight">5.3: Create an Action Automation</a></li><li><a href="#54-create-an-runbook-automation" class="table-of-contents__link toc-highlight">5.4: Create an RunBook Automation</a></li><li><a href="#55-create-an-aiops-runbook-policy-automation" class="table-of-contents__link toc-highlight">5.5: Create an AIOps RunBook Policy Automation</a></li><li><a href="#56-confirm-that-the-runbook-actually-run" class="table-of-contents__link toc-highlight">5.6: Confirm that the Runbook actually run</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops" target="_blank" rel="noopener noreferrer" class="footer__link-item">CP4WAIOps<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.ibm.com/docs/en/noi/" target="_blank" rel="noopener noreferrer" class="footer__link-item">NOI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.ibm.com/docs/en/obi/current" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instana<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.turbonomic.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Turbonomic<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.ibm.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBM<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/techxchange2024/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/jorgego11/waiops-tech-jam" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/techxchange2024/assets/js/runtime~main.7080ada5.js"></script>
<script src="/techxchange2024/assets/js/main.c0225fc7.js"></script>
</body>
</html>