<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-cloud-pak-aiops/netcool-lab/migrate-custom-correlation/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">4. Migrate a Netcool Custom Correlation to AIOps | IBM AIOps</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://jorgego11.github.io/techxchange2024/labs/cloud-pak-aiops/netcool-lab/migrate-custom-correlation/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="4. Migrate a Netcool Custom Correlation to AIOps | IBM AIOps"><meta data-rh="true" name="description" content="Migrate an Impact custom correlation from Netcool to AIOps"><meta data-rh="true" property="og:description" content="Migrate an Impact custom correlation from Netcool to AIOps"><link data-rh="true" rel="icon" href="/techxchange2024/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://jorgego11.github.io/techxchange2024/labs/cloud-pak-aiops/netcool-lab/migrate-custom-correlation/"><link data-rh="true" rel="alternate" href="https://jorgego11.github.io/techxchange2024/labs/cloud-pak-aiops/netcool-lab/migrate-custom-correlation/" hreflang="en"><link data-rh="true" rel="alternate" href="https://jorgego11.github.io/techxchange2024/labs/cloud-pak-aiops/netcool-lab/migrate-custom-correlation/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/techxchange2024/blog/rss.xml" title="IBM AIOps RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/techxchange2024/blog/atom.xml" title="IBM AIOps Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7WTTHT6SEH"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-7WTTHT6SEH",{anonymize_ip:!0})</script><link rel="stylesheet" href="/techxchange2024/assets/css/styles.118d6007.css">
<link rel="preload" href="/techxchange2024/assets/js/runtime~main.659189d8.js" as="script">
<link rel="preload" href="/techxchange2024/assets/js/main.45fe428a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/techxchange2024/"><div class="navbar__logo"><img src="/techxchange2024/img/ibm-watson-logo.png" alt="Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/techxchange2024/img/ibm-watson-logo.png" alt="Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">IBM SWAT</b></a><a class="navbar__item navbar__link" href="/techxchange2024/labs/jam-in-a-box/">Labs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/jorgego11/waiops-tech-jam" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/techxchange2024/labs/jam-in-a-box/">Jam-in-a-Box</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/techxchange2024/labs/cloud-pak-aiops/netcool-lab/introduction/">Cloud Pak for AIOps Labs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/techxchange2024/labs/cloud-pak-aiops/netcool-lab/introduction/">Netcool + Cloud Pak for AIOps</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/techxchange2024/labs/cloud-pak-aiops/netcool-lab/introduction/">1. Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/techxchange2024/labs/cloud-pak-aiops/netcool-lab/lab-environment/">2. Lab Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/techxchange2024/labs/cloud-pak-aiops/netcool-lab/netcool-connector/">3. Set up the Netcool Connector</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/techxchange2024/labs/cloud-pak-aiops/netcool-lab/migrate-custom-correlation/">4. Migrate a Netcool Custom Correlation to AIOps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/techxchange2024/labs/cloud-pak-aiops/netcool-lab/runbook-automation/">5. Runbook Automation</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/techxchange2024/labs/cloud-pak-aiops/topology-lab/introduction/">Topology</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/techxchange2024/labs/cloud-pak-aiops/alert-lab/introduction/">Alert Correlation</a></div></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/techxchange2024/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Cloud Pak for AIOps Labs</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Netcool + Cloud Pak for AIOps</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">4. Migrate a Netcool Custom Correlation to AIOps</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>4. Migrate a Netcool Custom Correlation to AIOps</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="41-overview">4.1 Overview<a href="#41-overview" class="hash-link" aria-label="Direct link to 4.1 Overview" title="Direct link to 4.1 Overview">​</a></h2><p>In this section, you will work through the process of migrating a correlation from Netcool/OMNIbus to AIOps.
We will start with the premise that we have an existing correlation whereby events are being correlated according to a custom automation.
The custom automation resides in Netcool/Impact and is doing a lookup in an external database and setting the business unit attribute
in the event. Events are then grouped according to this attribute. This migration process involves a number of steps:</p><ul><li>Modify the Netcool correlation so that it sets a common attribute within the event set that effectively links the event set together</li><li>Map the linked attribute up into AIOps</li><li>Create a scope-based automation policy in AIOps to correlate the events together</li></ul><p>In this section, you will complete the following tasks to simulate this exercise:</p><ul><li>Create a scope-based grouping policy in AIOps to correlate events according to your custom attribute</li><li>Create a custom field in the ObjectServer to hold the correlation key</li><li>Update the mapping in your Netcool Connector instance to map the correlation key</li><li>Create a Netcool/Impact policy to set the correlation key</li><li>Create and start a new Netcool/Impact Policy Activator service to run your Netcool/Impact policy</li><li>Observe your new custom correlation in action</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="42-create-a-scope-based-grouping-policy">4.2 Create a scope-based grouping policy<a href="#42-create-a-scope-based-grouping-policy" class="hash-link" aria-label="Direct link to 4.2 Create a scope-based grouping policy" title="Direct link to 4.2 Create a scope-based grouping policy">​</a></h2><p>Before creating a new scope based correlatio policy we will disable the default policies that come with AIOps. </p><ul><li>From the hamburger menu in the top-left of the screen, navigate to: <strong>Operate → Automations</strong></li><li>Select the <strong>Policies</strong> tab, click the <strong>Toggle Filters</strong> icon, check <strong>scope-based</strong> and click <strong>Apply</strong>.</li><li>You will see two default policies listed. Scroll to the right and under the <strong>State</strong> column click the slider to disable both of them.</li></ul><p>You will now create a new scope-based grouping policy automation in AIOps to correlate events that have been correlated together via your custom correlation automation. The policy will act when an alert is created or if the custom correlation field is updated. If the custom correlation field is not empty, it will correlate the events together based on the contents of this field, thereby effecting the correlation.</p><p>Use the following steps to create the new AIOps automation policy:</p><ul><li>Under the <strong>Policies</strong> tab, click the <strong>Create policy</strong> button</li><li>From the <strong>Policy templates</strong> page, select the <strong>Group alerts based on scope</strong> tile</li><li>From the <strong>Group alerts based on scope</strong> page:<ul><li>Make sure the <strong>Policy</strong> is <strong>Enabled</strong> (green)</li><li>Under <strong>Policy details</strong>, set the <strong>Policy name</strong> as &quot;Custom correlation&quot;</li><li>Change the <strong>Execution order</strong> slider value to <strong>40</strong></li><li>Under <strong>Policy is triggered</strong>, check <strong>Before an alert is created</strong></li><li>Under <strong>Policy is triggered</strong>, check <strong>After an alert has been updated</strong></li><li>Under <strong>Alert property</strong>, select <strong>alert.details</strong> and set <strong>Change</strong> to <strong>Changes</strong><ul><li>Under <strong>Details name</strong>, enter: <code>customCorrelation1</code></li></ul></li><li>Under <strong>Condition sets</strong>:<ul><li>Click on <strong>Add condition</strong> and select <strong>Alert property</strong></li><li>Leave <strong>AND</strong> selected</li><li>For <strong>Property</strong>, select <strong>alert.details</strong></li><li>For <strong>Details name</strong>, enter: <code>customCorrelation1</code></li><li>Under <strong>Operator</strong> select <strong>not empty</strong></li></ul></li><li>Under <strong>Create a scope-based grouping</strong>:<ul><li>Select <strong>alert.details</strong></li><li>For <strong>Details name</strong>, enter: <code>customCorrelation1</code></li><li>Click <strong>Apply</strong></li></ul></li><li>Under <strong>Time window</strong>:<ul><li>For <strong>Specify a time period</strong>, enter: <code>300</code>. This represents 300 seconds (5 minutes).</li><li>Under <strong>Type</strong>, select <strong>Rolling</strong>. This means that alerts will continue to be grouped as long as they are not separated by more than 15 minutes.</li></ul></li></ul></li></ul><p>Your new policy should look like this:</p><p><img loading="lazy" src="/techxchange2024/assets/images/policy1-0b735204b8ae299ee8577ab29a212e32.png" width="2938" height="1572" class="img_ev3q">
<img loading="lazy" src="/techxchange2024/assets/images/policy2-3969ec345eef142b2a3713b3ac80eb36.png" width="2938" height="820" class="img_ev3q">
<img loading="lazy" src="/techxchange2024/assets/images/policy3-1ba2aa897c0341a2d8910ddd0f652bae.png" width="2938" height="1260" class="img_ev3q"></p><ul><li>Finally, click on <strong>Create Policy</strong> on the top-right to create your new policy.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="43-create-a-custom-field-in-netcoolomnibus">4.3 Create a custom field in Netcool/OMNIbus<a href="#43-create-a-custom-field-in-netcoolomnibus" class="hash-link" aria-label="Direct link to 4.3 Create a custom field in Netcool/OMNIbus" title="Direct link to 4.3 Create a custom field in Netcool/OMNIbus">​</a></h2><p>Now you will create a custom field in Netcool/OMNIbus to hold the custom correlation attribute.</p><p>The first step is to create a custom field to hold the key data value that will tie each event set together.</p><p>Use the following steps to create the custom field in Netcool/OMNIbus:</p><ul><li>From the <strong>Terminal</strong> window run these commands</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export OMNIHOME=/opt/IBM/tivoli/netcool/omnibus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$OMNIHOME/bin/nco_sql -server AGG_P -user root -password netcool</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Execute the following SQL at the SQL command prompt:</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ALTER TABLE alerts.status ADD COLUMN CustomCorrelation1 VARCHAR(64);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>You should see the message <strong>(0 rows affected)</strong></li><li>Type the following to validate the creation of your new field:</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">describe alerts.status;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should see your newly created field at the bottom of the table listing. Type <strong>quit</strong> to exit the SQL prompt.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="44-update-the-netcool-connector-mapping">4.4 Update the Netcool Connector mapping<a href="#44-update-the-netcool-connector-mapping" class="hash-link" aria-label="Direct link to 4.4 Update the Netcool Connector mapping" title="Direct link to 4.4 Update the Netcool Connector mapping">​</a></h2><p>Now you will modify your Netcool Connector mapping to include your newly created custom correlation field.</p><p>Use the following steps to modify your Netcool Connector instance:</p><ul><li>From the Home page select <strong>Integrations</strong></li><li>Select <strong>IBM Netcool Operations Insight ObjectServer</strong> from the already created integrations</li><li>Click on the Netcool Connector instance you created in the earlier lab</li><li>Click <strong>Next</strong> twice to get to the mapping screen</li><li>Scroll down to the <strong>details</strong> section and update it so it includes your additional attribute mapping:</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;details&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;technology&quot;: alert.@Technology = &quot;&quot; ? undefined : alert.@Technology,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;businessService&quot;: alert.@BusinessService = &quot;&quot; ? undefined : alert.@BusinessService,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;componentType&quot;: alert.@ComponentType = &quot;&quot; ? undefined : alert.@ComponentType,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;alertOrigin&quot;: &quot;OMNIbus&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;customCorrelation1&quot;: alert.@CustomCorrelation1 = &quot;&quot; ? undefined : alert.@CustomCorrelation1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Click <strong>Save</strong> to update your Netcool Connector integration instance</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="45-create-a-netcoolimpact-policy">4.5 Create a Netcool/Impact policy<a href="#45-create-a-netcoolimpact-policy" class="hash-link" aria-label="Direct link to 4.5 Create a Netcool/Impact policy" title="Direct link to 4.5 Create a Netcool/Impact policy">​</a></h2><p>Now you will create a Netcool/Impact policy to set the correlation key value in different groups of events, to simulate the event enrichment process.</p><p>Use the following steps to create the new custom correlation policy in Netcool/Impact:</p><ul><li>Open a new browser tab and select the <strong>Netcool/Impact</strong> bookmark (<code>https://student:16311/ibm/console</code>)</li><li>Log in to Netcool/Impact as the user <code>impactadmin</code> and password <code>netcool</code></li><li>Click on <strong>Policies</strong></li><li>Click on the pull-down menu button on the new policy button and select <strong>IPL Policy</strong></li><li>Copy and paste the following sample policy into the policy editor:</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// CUSTOM CORRELATION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GroupKey = String(GetDate()); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MySQL1 = &quot;update alerts.status set CustomCorrelation1 = &#x27;US:&quot; + GroupKey + &quot;&#x27;&quot; +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot; where CustomCorrelation1 = &#x27;&#x27;&quot; +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot; and Node in (&#x27;losangeles-server03.ibm.com&#x27;, &#x27;washington-server52.ibm.com&#x27;)&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DirectSQL(&quot;defaultobjectserver&quot;, MySQL1, false, false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MySQL2 = &quot;update alerts.status set CustomCorrelation1 = &#x27;AP:&quot; + GroupKey + &quot;&#x27;&quot; +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot; where CustomCorrelation1 = &#x27;&#x27;&quot; +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot; and Node in (&#x27;sydney-server08.ibm.com&#x27;, &#x27;tokyo-server01.ibm.com&#x27;)&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DirectSQL(&quot;defaultobjectserver&quot;, MySQL2, false, false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MySQL3 = &quot;update alerts.status set CustomCorrelation1 = &#x27;EU:&quot; + GroupKey + &quot;&#x27;&quot; +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot; where CustomCorrelation1 = &#x27;&#x27;&quot; +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot; and Node in (&#x27;rome-server03.ibm.com&#x27;, &#x27;london-server01.ibm.com&#x27;, &#x27;berlin-server23.ibm.com&#x27;, &#x27;berlin-server55.ibm.com&#x27;)&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DirectSQL(&quot;defaultobjectserver&quot;, MySQL3, false, false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Click on the <strong>Save</strong> button (disk icon) and save the policy as: <code>AIOPS_CustomCorrelation</code></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="46-create-configure-and-start-a-policy-activator-service">4.6 Create, configure, and start a Policy Activator service<a href="#46-create-configure-and-start-a-policy-activator-service" class="hash-link" aria-label="Direct link to 4.6 Create, configure, and start a Policy Activator service" title="Direct link to 4.6 Create, configure, and start a Policy Activator service">​</a></h2><p>Now you will create a new Policy Activator service, that will periodically target sets of events and mark them for correlation. It will do this by setting the <strong>CustomCorrelation1</strong> field.</p><ul><li>Click on the <strong>Services</strong> tab</li><li>Click on the pull-down menu button on the new service button and select <strong>Policy Activator</strong><ul><li>Under <strong>Service Name</strong>, enter: <code>CustomCorrelation</code></li><li>Under <strong>Activation Interval</strong>, enter: <code>11</code> (seconds)</li><li>Under <strong>Policy</strong>, select <strong>AIOPS_CustomCorrelation</strong></li><li>Check <strong>Starts automatically when server starts</strong></li></ul></li><li>Click on the disk icon to save your new Policy Activator service</li></ul><p><img loading="lazy" src="/techxchange2024/assets/images/new_policy_activator_service-36022d50cc7270b56c2e0247e0d3fe42.png" width="504" height="266" class="img_ev3q"></p><ul><li>Select your newly created service and click the play button (<strong>Start Service</strong>) to start it</li></ul><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Make sure you have selected your newly created service and clicked the play button (<strong>Start Service</strong>) to start it</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="47-observe-your-new-correlation-in-action">4.7 Observe your new correlation in action<a href="#47-observe-your-new-correlation-in-action" class="hash-link" aria-label="Direct link to 4.7 Observe your new correlation in action" title="Direct link to 4.7 Observe your new correlation in action">​</a></h2><p>Now we will verify that the correlation is working</p><ul><li>Switch to the Cloud Pak for AIOps tab</li><li>From the Home page select <strong>Alerts</strong></li><li>Add the new <strong>customCorrelation1</strong> field to your View as you did in <a href="/techxchange2024/labs/cloud-pak-aiops/netcool-lab/netcool-connector/">section 3.5</a></li><li>View your Simnet alerts with the <strong>customCorrelation1</strong> field populated</li><li>See your Simnet alerts grouped via a scope-based correlation</li></ul><p><img loading="lazy" src="/techxchange2024/assets/images/correlated_events-f9396c80b126c556c907cb06577342df.png" width="2942" height="684" class="img_ev3q"></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/techxchange2024/labs/cloud-pak-aiops/netcool-lab/netcool-connector/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">3. Set up the Netcool Connector</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/techxchange2024/labs/cloud-pak-aiops/netcool-lab/runbook-automation/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">5. Runbook Automation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#41-overview" class="table-of-contents__link toc-highlight">4.1 Overview</a></li><li><a href="#42-create-a-scope-based-grouping-policy" class="table-of-contents__link toc-highlight">4.2 Create a scope-based grouping policy</a></li><li><a href="#43-create-a-custom-field-in-netcoolomnibus" class="table-of-contents__link toc-highlight">4.3 Create a custom field in Netcool/OMNIbus</a></li><li><a href="#44-update-the-netcool-connector-mapping" class="table-of-contents__link toc-highlight">4.4 Update the Netcool Connector mapping</a></li><li><a href="#45-create-a-netcoolimpact-policy" class="table-of-contents__link toc-highlight">4.5 Create a Netcool/Impact policy</a></li><li><a href="#46-create-configure-and-start-a-policy-activator-service" class="table-of-contents__link toc-highlight">4.6 Create, configure, and start a Policy Activator service</a></li><li><a href="#47-observe-your-new-correlation-in-action" class="table-of-contents__link toc-highlight">4.7 Observe your new correlation in action</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops" target="_blank" rel="noopener noreferrer" class="footer__link-item">CP4WAIOps<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.ibm.com/docs/en/noi/" target="_blank" rel="noopener noreferrer" class="footer__link-item">NOI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.ibm.com/docs/en/obi/current" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instana<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.turbonomic.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Turbonomic<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.ibm.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBM<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/techxchange2024/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/jorgego11/waiops-tech-jam" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/techxchange2024/assets/js/runtime~main.659189d8.js"></script>
<script src="/techxchange2024/assets/js/main.45fe428a.js"></script>
</body>
</html>